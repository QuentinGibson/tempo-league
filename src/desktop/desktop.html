<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="../../css/general.css" />
  <link rel="stylesheet" href="../../css/header.css" />
  <title>Tempo League</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap');

    :root {
      --bg-deep: #0a0a0f;
      --bg-surface: #111118;
      --bg-elevated: #16161f;
      --accent-core: #e8364f;
      --accent-glow: #ff4d6a;
      --accent-dim: #7a1d2e;
      --text-primary: #e8e6f0;
      --text-muted: #5a586a;
      --text-dim: #3a3848;
      --accent-r: 232;
      --accent-g: 54;
      --accent-b: 79;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg-deep);
      font-family: 'Outfit', sans-serif;
      overflow: hidden;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .app-header {
      flex-shrink: 0;
    }

    /* ---- Custom Tempo header ---- */
    .tempo-header {
      padding: 0 4px 0 12px;
      height: 38px;
      background: linear-gradient(to right, #0f0f16, #1a1a24 40%, #0f0f16);
      border-bottom: 1px solid rgba(232, 54, 79, 0.08);
    }

    .tempo-header__brand {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tempo-header__logo {
      width: 24px;
      height: 24px;
      padding: 0 !important;
      margin: 0 !important;
    }

    .tempo-header__text {
      display: flex;
      align-items: baseline;
      gap: 5px;
    }

    .tempo-header__title {
      font-family: 'Outfit', sans-serif;
      font-size: 14px;
      font-weight: 700;
      color: #e8e6f0;
      letter-spacing: 3px;
      cursor: inherit;
    }

    .tempo-header__subtitle {
      font-family: 'Outfit', sans-serif;
      font-size: 10px;
      font-weight: 300;
      color: #5a586a;
      letter-spacing: 4px;
      cursor: inherit;
    }

    .tempo-header__tag {
      font-family: 'JetBrains Mono', monospace;
      font-size: 8px;
      font-weight: 500;
      color: var(--accent-core);
      background: rgba(232, 54, 79, 0.1);
      border: 1px solid rgba(232, 54, 79, 0.2);
      border-radius: 3px;
      padding: 1px 4px;
      letter-spacing: 1px;
      margin-left: 2px;
      cursor: inherit;
    }

    /* ---- Main layout ---- */
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      min-height: 0;
    }

    /* ---- Background grain ---- */
    main::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 0;
    }

    /* ---- Subtle grid lines ---- */
    main::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image:
        linear-gradient(rgba(232, 54, 79, 0.015) 1px, transparent 1px),
        linear-gradient(90deg, rgba(232, 54, 79, 0.015) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: 0;
    }

    /* ---- Dashboard container ---- */
    .dashboard {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px;
      width: 100%;
      max-width: 680px;
      padding: 0 40px;
    }

    /* ---- EKG heartbeat line ---- */
    .ekg-section {
      width: 100%;
      height: 80px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .ekg-line {
      width: 100%;
      height: 80px;
      opacity: 0.6;
    }

    .ekg-line path {
      fill: none;
      stroke: url(#ekgGradient);
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 1200;
      stroke-dashoffset: 1200;
      animation: ekg-draw 3s ease-in-out forwards, ekg-loop 4s ease-in-out 3s infinite;
    }

    @keyframes ekg-draw {
      to {
        stroke-dashoffset: 0;
      }
    }

    @keyframes ekg-loop {
      0% {
        opacity: 1;
      }
      50% {
        opacity: 0.4;
      }
      100% {
        opacity: 1;
      }
    }

    /* Glow behind the EKG spike */
    .ekg-glow {
      position: absolute;
      width: 120px;
      height: 60px;
      background: radial-gradient(ellipse, rgba(232, 54, 79, 0.12) 0%, transparent 70%);
      pointer-events: none;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: ekg-glow-pulse 4s ease-in-out 3s infinite;
    }

    @keyframes ekg-glow-pulse {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity: 0.3;
        transform: translate(-50%, -50%) scale(0.8);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    /* ---- Status section ---- */
    .status-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 24px;
      animation: fade-up 0.8s ease-out 0.3s both;
    }

    @keyframes fade-up {
      from {
        opacity: 0;
        transform: translateY(12px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ---- Connection status ---- */
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 20px;
      background: var(--bg-surface);
      border: 1px solid rgba(255, 255, 255, 0.04);
      border-radius: 100px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent-core);
      box-shadow: 0 0 8px rgba(232, 54, 79, 0.4);
      animation: status-pulse 2s ease-in-out infinite;
    }

    @keyframes status-pulse {
      0%, 100% {
        opacity: 1;
        box-shadow: 0 0 8px rgba(232, 54, 79, 0.4);
      }
      50% {
        opacity: 0.6;
        box-shadow: 0 0 4px rgba(232, 54, 79, 0.2);
      }
    }

    .status-text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      font-weight: 400;
      color: var(--text-muted);
      letter-spacing: 1.5px;
      text-transform: uppercase;
    }

    /* ---- Champion card ---- */
    .champion-card {
      width: 100%;
      max-width: 420px;
      background: var(--bg-surface);
      border: 1px solid rgba(255, 255, 255, 0.04);
      border-radius: 8px;
      padding: 32px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .champion-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(to right, transparent, rgba(232, 54, 79, 0.2), transparent);
    }

    .champion-card__waiting {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .champion-card__icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.06);
      background: var(--bg-elevated);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .champion-card__icon svg {
      width: 22px;
      height: 22px;
      opacity: 0.3;
    }

    .champion-card__label {
      font-size: 15px;
      font-weight: 300;
      color: var(--text-muted);
      letter-spacing: 0.5px;
    }

    .champion-card__sublabel {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      font-weight: 300;
      color: var(--text-dim);
      letter-spacing: 1px;
    }

    .dot-pulse {
      display: inline-block;
      animation: dot-blink 1.4s infinite steps(1);
    }

    .dot-pulse:nth-child(2) {
      animation-delay: 0.2s;
    }

    .dot-pulse:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes dot-blink {
      0%, 50% {
        opacity: 0;
      }
      25% {
        opacity: 1;
      }
    }

    /* Champion detected state */
    .champion-card__detected {
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 16px;
    }

    .champion-card__detected.visible {
      display: flex;
    }

    .champion-card__waiting.hidden {
      display: none;
    }

    .champion-card__name {
      font-size: 28px;
      font-weight: 600;
      color: var(--text-primary);
      letter-spacing: 1px;
    }

    .champion-card__stats {
      display: flex;
      align-items: center;
      gap: 24px;
    }

    .champion-card__stat {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .champion-card__stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 22px;
      font-weight: 500;
      color: var(--accent-glow);
    }

    .champion-card__stat-label {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      font-weight: 300;
      color: var(--text-dim);
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .champion-card__divider {
      width: 1px;
      height: 36px;
      background: rgba(255, 255, 255, 0.06);
    }

    .champion-card__sync-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      font-weight: 400;
      color: var(--accent-core);
      background: rgba(232, 54, 79, 0.08);
      border: 1px solid rgba(232, 54, 79, 0.15);
      border-radius: 100px;
      padding: 4px 14px;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .champion-card__sync-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: var(--accent-core);
      animation: status-pulse 2s ease-in-out infinite;
    }

    /* ---- How it works ---- */
    .how-section {
      display: flex;
      gap: 32px;
      width: 100%;
      max-width: 520px;
      animation: fade-up 0.8s ease-out 0.6s both;
    }

    .how-step {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      text-align: center;
    }

    .how-step__number {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      font-weight: 500;
      color: var(--accent-core);
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 1px solid rgba(232, 54, 79, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .how-step__text {
      font-size: 12px;
      font-weight: 300;
      color: var(--text-dim);
      line-height: 1.5;
      letter-spacing: 0.3px;
    }

    .how-step__connector {
      width: 1px;
      flex-shrink: 0;
      align-self: stretch;
      background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.04), transparent);
    }

    /* ---- Footer version ---- */
    .app-footer {
      position: absolute;
      bottom: 12px;
      left: 0;
      right: 0;
      text-align: center;
      z-index: 1;
      animation: fade-up 0.8s ease-out 0.9s both;
    }

    .app-footer__text {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      font-weight: 300;
      color: var(--text-dim);
      letter-spacing: 2px;
    }

    /* ---- Hidden debug logs ---- */
    .debug-logs {
      display: none;
    }

    /* ---- Utility ---- */
    .hidden {
      display: none !important;
    }
  </style>
</head>

<body>
  <!-- -------------------------------- Header ------------------------------- -->
  <header id="header" class="app-header tempo-header">
    <div class="tempo-header__brand">
      <img src="../../img/tempo_logo.svg" class="tempo-header__logo" />
      <div class="tempo-header__text">
        <span class="tempo-header__title">TEMPO</span>
        <span class="tempo-header__subtitle">LEAGUE</span>
      </div>
      <span class="tempo-header__tag">BPM</span>
    </div>
    <div class="window-controls-group">
      <button id="minimizeButton" class="window-control window-control-minimize"></button>
      <button id="maximizeButton" class="window-control window-control-maximize"></button>
      <button id="closeButton" class="window-control window-control-close"></button>
    </div>
  </header>

  <!-- --------------------------------- Main -------------------------------- -->
  <main>
    <div class="dashboard">

      <!-- EKG heartbeat line -->
      <div class="ekg-section">
        <div class="ekg-glow"></div>
        <svg class="ekg-line" viewBox="0 0 680 80" preserveAspectRatio="none">
          <defs>
            <linearGradient id="ekgGradient" x1="0" y1="0" x2="1" y2="0">
              <stop offset="0%" stop-color="#e8364f" stop-opacity="0" />
              <stop offset="15%" stop-color="#e8364f" stop-opacity="0.3" />
              <stop offset="35%" stop-color="#ff4d6a" stop-opacity="0.8" />
              <stop offset="50%" stop-color="#e8364f" stop-opacity="1" />
              <stop offset="65%" stop-color="#ff4d6a" stop-opacity="0.8" />
              <stop offset="85%" stop-color="#e8364f" stop-opacity="0.3" />
              <stop offset="100%" stop-color="#e8364f" stop-opacity="0" />
            </linearGradient>
          </defs>
          <path d="M0 40 L180 40 L220 40 L240 20 L260 60 L280 10 L300 70 L320 25 L340 40 L380 40 L420 40 L440 32 L460 48 L480 28 L500 52 L510 40 L680 40" />
        </svg>
      </div>

      <!-- Status section -->
      <div class="status-section">
        <!-- Connection indicator -->
        <div class="status-indicator">
          <div class="status-dot"></div>
          <span class="status-text">Listening to League Client</span>
        </div>

        <!-- Champion card -->
        <div class="champion-card" id="championCard">
          <!-- Waiting state -->
          <div class="champion-card__waiting" id="championWaiting">
            <div class="champion-card__icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67V7z" fill="#5a586a"/>
              </svg>
            </div>
            <span class="champion-card__label">
              Waiting for champion select<span class="dot-pulse">.</span><span class="dot-pulse">.</span><span class="dot-pulse">.</span>
            </span>
            <span class="champion-card__sublabel">pick a champion to begin</span>
          </div>

          <!-- Detected state -->
          <div class="champion-card__detected" id="championDetected">
            <span class="champion-card__name" id="champDisplayName">—</span>
            <div class="champion-card__stats">
              <div class="champion-card__stat">
                <span class="champion-card__stat-value" id="champDisplayBpm">—</span>
                <span class="champion-card__stat-label">BPM</span>
              </div>
              <div class="champion-card__divider"></div>
              <div class="champion-card__stat">
                <span class="champion-card__stat-value" id="champDisplayAs">—</span>
                <span class="champion-card__stat-label">Attack Speed</span>
              </div>
            </div>
            <div class="champion-card__sync-badge">
              <span class="champion-card__sync-dot"></span>
              synced to second monitor
            </div>
          </div>
        </div>
      </div>

      <!-- How it works -->
      <div class="how-section">
        <div class="how-step">
          <span class="how-step__number">1</span>
          <span class="how-step__text">Pick a champion in champ select</span>
        </div>
        <div class="how-step__connector"></div>
        <div class="how-step">
          <span class="how-step__number">2</span>
          <span class="how-step__text">Attack speed converts to BPM rhythm</span>
        </div>
        <div class="how-step__connector"></div>
        <div class="how-step">
          <span class="how-step__number">3</span>
          <span class="how-step__text">Pulse syncs to your second monitor</span>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="app-footer">
      <span class="app-footer__text">tempo league v1.0</span>
    </div>

    <!-- Hidden debug logs (required by desktop.ts) -->
    <div class="debug-logs">
      <div id="eventsLog"></div>
      <div id="infoLog"></div>
    </div>
  </main>
</body>

</html>
